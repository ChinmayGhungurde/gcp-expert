Vertex AI
Documentation
Generative AI
Was this helpful?
Send feedback
Text embeddings
bookmark_border
On this page
Use cases
HTTP request
Model versions
Request body
Sample request
Response body
Sample response
Embeddings for text (textembedding-gecko) is the name for the model that supports text embeddings. Text embeddings are a NLP technique that converts textual data into numerical vectors that can be processed by machine learning algorithms, especially large models. These vector representations are designed to capture the semantic meaning and context of the words they represent.
There are a few versions available for embeddings. Embeddings for text is the newest version with enhanced AI quality versus the current stable version textembedding-gecko@001, and textembedding-gecko-multilingual@latest is a model optimized for a wide range of non-English languages.
To explore this model in the console, see the Embeddings for text model card in the Model Garden.
Go to the Model Garden
Use cases
Semantic Search: Text embeddings can be used to represent both the user's query and the universe of documents in a high-dimensional vector space. Documents that are more semantically similar to the user's query will have a shorter distance in the vector space, and can be ranked higher in the search results.
Text Classification: Training a model that maps the text embeddings to the correct category labels (e.g., cat vs. dog, spam vs. not spam). Once the model is trained, it can be used to classify new text inputs into one or more categories based on their embeddings.
HTTP request
POST https://us-central1-aiplatform.googleapis.com/v1/projects/PROJECT_ID/locations/us-central1/publishers/google/models/textembedding-gecko:predict
Model versions
To use the latest model version, specify the model name without a version number, for example textembedding-gecko.
To use a stable model version, specify the model version number, for example textembedding-gecko@001. Each stable version is available for six months after the release date of the subsequent stable version.
The following table contains the available stable model versions:
textembedding-gecko model Release date
textembedding-gecko@001 June 7, 2023
For more information, see Model versions and lifecycle.
Request body
{
  "instances": [
    { 
      "task_type": "RETRIEVAL_DOCUMENT",
      "title": "document title",
      "content": "I would like embeddings for this text!"
    },
  ]
}
The Vertex AI PaLM Embedding API performs online (real-time) predictions to get embeddings from input text.
The API accepts a maximum of 3,072 input tokens and outputs 768-dimensional vector embeddings. Use the following parameters for the text embeddings model textembedding-gecko. For more information, see Text embeddings overview.
Parameter Description Acceptable values
content
The text that you want to generate embeddings for. Text
task type
The `task_type` parameter is defined as the intended downstream application to help the model produce better quality embeddings. It is a string that can take on one of the following values. `RETRIEVAL_QUERY`, `RETRIEVAL_DOCUMENT`,`SEMANTIC_SIMILARITY`, `CLASSIFICATION` `CLUSTERING`.
title
The title for the embedding. Text
Sample request
REST
Vertex AI SDK for Python
Node.js
Java
To test a text prompt by using the Vertex AI API, send a POST request to the publisher model endpoint.
Before using any of the request data, make the following replacements:
PROJECT_ID: Your project ID.
TEXT: The text that you want to generate embeddings for.
HTTP method and URL:
POST https://us-central1-aiplatform.googleapis.com/v1/projects/
PROJECT_ID/locations/us-central1/publishers/google/models/textembedding-gecko:predict
Request JSON body:
{
  "instances": [
    { "content": "
TEXT"}
  ],
}
To send your request, choose one of these options:
curl
PowerShell
Note: The following command assumes that you have logged in to the gcloud CLI with your user account by running gcloud init or gcloud auth login, or by using Cloud Shell, which automatically logs you into the gcloud CLI. You can check the currently active account by running gcloud auth list.
Save the request body in a file named request.json, and execute the following command:
curl -X POST \
    -H "Authorization: Bearer $(gcloud auth print-access-token)" \
    -H "Content-Type: application/json; charset=utf-8" \
    -d @request.json \
    "https://us-central1-aiplatform.googleapis.com/v1/projects/
PROJECT_ID/locations/us-central1/publishers/google/models/textembedding-gecko:predict"








You should receive a JSON response similar to the sample response.




































































































































Response body
{
  "predictions": [
    {
      "embeddings": {
        "statistics": {
          "truncated": boolean,
          "token_count": integer
        },
        "values": [ number ]
      }
    }
  ]
}
Response element Description
embeddings The result generated from input text.
statistics The statistics computed from the input text.
truncated Indicates if the input text was longer than max allowed tokens and truncated.
tokenCount Number of tokens of the input text.
values The values field contains the embedding vectors corresponding to the words in the input text.
Sample response
{
  "predictions": [
    {
      "embeddings": {
        "values": [
          0.0058424929156899452,
          0.011848051100969315,
          0.032247550785541534,
          -0.031829461455345154,
          -0.055369812995195389,
          ...
        ],
        "statistics": {
          "token_count": 4,
          "truncated": false
        }
      }
    }
  ]
}
Was this helpful?
Send feedback